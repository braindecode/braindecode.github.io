
<!DOCTYPE html>


<html lang="en" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Benchmarking preprocessing with parallelization and serialization &#8212; Braindecode 0.7 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=09706775" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script src="../../_static/documentation_options.js?v=df5ae754"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-7Q43R82K6D"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-7Q43R82K6D');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-7Q43R82K6D');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'auto_examples/datasets_io/plot_benchmark_preprocessing';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://braindecode.org/stable/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.7';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Custom Dataset Example" href="plot_custom_dataset_example.html" />
    <link rel="prev" title="Benchmarking eager and lazy loading" href="benchmark_lazy_eager_loading.html" />
    <link rel="canonical" href="braindecode.org/index.html" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
    
    <img src="../../_static/braindecode_symbol.png" class="logo__image only-light" alt="Braindecode Logo"/>
    <script>document.write(`<img src="../../_static/braindecode_symbol.png" class="logo__image only-dark" alt="Braindecode Logo"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../install/install.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../cite.html">
                        Cite
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Tutorial and Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../help.html">
                        Get help
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../whats_new.html">
                        What’s new
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="versionswitcherbutton" type="button" role="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="listbox" aria-controls="versionswitcherlist" aria-label="Version switcher list">
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="versionswitcherlist" class="version-switcher__menu dropdown-menu list-group-flush py-0" role="listbox" aria-labelledby="versionswitcherbutton">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../install/install.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../cite.html">
                        Cite
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Tutorial and Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../help.html">
                        Get help
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../whats_new.html">
                        What’s new
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="versionswitcherbutton" type="button" role="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="listbox" aria-controls="versionswitcherlist" aria-label="Version switcher list">
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="versionswitcherlist" class="version-switcher__menu dropdown-menu list-group-flush py-0" role="listbox" aria-labelledby="versionswitcherbutton">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../model_building/index.html">Basic model building and training</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_basic_training_epochs.html">Simple training on MNE epochs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_bcic_iv_2a_moabb_cropped.html">Cropped Decoding on BCIC IV 2a Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_bcic_iv_2a_moabb_trial.html">Basic Brain Decoding on EEG Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_how_train_test_and_tune.html">How to train, test and tune your model?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_hyperparameter_tuning_with_scikit-learn.html">Hyperparameter tuning with scikit-learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_regression.html">Convolutional neural network regression model on fake data.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../model_building/plot_train_in_pure_pytorch_and_pytorch_lightning.html">Training a Braindecode model in PyTorch</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Loading and organizing data</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="benchmark_lazy_eager_loading.html">Benchmarking eager and lazy loading</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Benchmarking preprocessing with parallelization and serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_custom_dataset_example.html">Custom Dataset Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_load_save_datasets.html">Load and save dataset example</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_mne_dataset_example.html">MNE Dataset Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_moabb_dataset_example.html">MOABB Dataset Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_split_dataset.html">Split Dataset Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_tuh_discrete_multitarget.html">Multiple discrete targets with the TUH EEG Corpus</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../advanced_training/index.html">Advanced neural network training strategies</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced_training/plot_bcic_iv_4_ecog_cropped.html">Fingers flexion cropped decoding on BCIC IV 4 ECoG Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_training/plot_data_augmentation.html">Data Augmentation on BCIC IV 2a Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_training/plot_data_augmentation_search.html">Searching the best data augmentation on BCIC IV 2a Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_training/plot_relative_positioning.html">Self-supervised learning on EEG with relative positioning</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../applied_examples/index.html">Applied examples on real-world datasets</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applied_examples/plot_bcic_iv_4_ecog_trial.html">Fingers flexion decoding on BCIC IV 4 ECoG Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applied_examples/plot_sleep_staging_chambon2018.html">Sleep staging on the Sleep Physionet dataset using Chambon2018 network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applied_examples/plot_sleep_staging_eldele2021.html">Sleep staging on the Sleep Physionet dataset using Eldele2021</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applied_examples/plot_sleep_staging_usleep.html">Sleep staging on the Sleep Physionet dataset using U-Sleep network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applied_examples/plot_tuh_eeg_corpus.html">Process a big data EEG resource (TUH EEG Corpus)</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Examples</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Loading and organizing data</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Benchmarking...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
<div>
  
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-datasets-io-plot-benchmark-preprocessing-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="benchmarking-preprocessing-with-parallelization-and-serialization">
<span id="sphx-glr-auto-examples-datasets-io-plot-benchmark-preprocessing-py"></span><h1>Benchmarking preprocessing with parallelization and serialization<a class="headerlink" href="#benchmarking-preprocessing-with-parallelization-and-serialization" title="Link to this heading">#</a></h1>
<p>In this example, we compare the execution time and memory requirements of
preprocessing data with the parallelization and serialization functionalities
available in <a class="reference internal" href="../../generated/braindecode.preprocessing.preprocess.html#braindecode.preprocessing.preprocess" title="braindecode.preprocessing.preprocess"><code class="xref py py-func docutils literal notranslate"><span class="pre">braindecode.preprocessing.preprocess()</span></code></a>.</p>
<p>We compare 4 cases:</p>
<ol class="arabic simple">
<li><p>Sequential, no serialization</p></li>
<li><p>Sequential, with serialization</p></li>
<li><p>Parallel, no serialization</p></li>
<li><p>Parallel, with serialization</p></li>
</ol>
<p>Case 1 is the simplest approach, in which all recordings in a
<a class="reference internal" href="../../generated/braindecode.datasets.BaseConcatDataset.html#braindecode.datasets.BaseConcatDataset" title="braindecode.datasets.BaseConcatDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">braindecode.datasets.BaseConcatDataset</span></code></a> are preprocessed one after the
other. In this scenario, <a class="reference internal" href="../../generated/braindecode.preprocessing.preprocess.html#braindecode.preprocessing.preprocess" title="braindecode.preprocessing.preprocess"><code class="xref py py-func docutils literal notranslate"><span class="pre">braindecode.preprocessing.preprocess()</span></code></a> acts
inplace, which means memory usage will likely stay stable (depending on the
preprocessing operations) if recordings have been preloaded. However, two
potential issues arise when working with large datasets: (1) if recordings have
not been preloaded before preprocessing, <cite>preprocess()</cite> will need to load them
and keep them in memory, in which case memory can become a bottleneck, and (2)
sequential preprocessing can take a considerable amount of time to run when
working with many recordings.</p>
<p>A solution to the first issue (memory usage) is to save the preprocessed data
to a file so it can be cleared from memory before moving on to the next
recording (case 2). The recordings can then be reloaded with <cite>preload=False</cite>
once they have all been saved to disk. This enables using the lazy loading
capabilities of <a class="reference internal" href="../../generated/braindecode.datasets.BaseConcatDataset.html#braindecode.datasets.BaseConcatDataset" title="braindecode.datasets.BaseConcatDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">braindecode.datasets.BaseConcatDataset</span></code></a> and avoids
potential memory bottlenecks. The downside is that the writing to disk can take
some time and of course requires disk space.</p>
<p>A solution to the second issue (slow preprocessing) is to parallelize the
preprocessing over multiple cores whenever possible (case 3). This can speed up
preprocessing significantly. However, this approach will increase memory usage
because of the way parallelization is implemented internally (with
<cite>joblib</cite>, copies of (part of) the data must be made when sending arguments to
parallel processes).</p>
<p>Finally, case 4 (combining parallelization and serialization) is likely to be
both fast and memory efficient. As shown in this example, this remains a
tradeoff though, and the selected configuration should depend on the size of
the dataset and the specific operations applied to the recordings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Hubert Banville &lt;hubert.jbanville@gmail.com&gt;</span>
<span class="c1">#</span>
<span class="c1"># License: BSD (3-clause)</span>


<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <a href="https://docs.python.org/3/library/itertools.html#itertools.product" title="itertools.product" class="sphx-glr-backref-module-itertools sphx-glr-backref-type-py-function"><span class="n">product</span></a>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.scale.html#sklearn.preprocessing.scale" title="sklearn.preprocessing.scale" class="sphx-glr-backref-module-sklearn-preprocessing sphx-glr-backref-type-py-function"><span class="n">scale</span></a>
<span class="kn">from</span> <span class="nn">memory_profiler</span> <span class="kn">import</span> <span class="n">memory_usage</span>

<span class="kn">from</span> <span class="nn">braindecode.datasets</span> <span class="kn">import</span> <a href="../../generated/braindecode.datasets.SleepPhysionet.html#braindecode.datasets.SleepPhysionet" title="braindecode.datasets.SleepPhysionet" class="sphx-glr-backref-module-braindecode-datasets sphx-glr-backref-type-py-class"><span class="n">SleepPhysionet</span></a>
<span class="kn">from</span> <span class="nn">braindecode.preprocessing</span> <span class="kn">import</span> <span class="p">(</span>
    <a href="../../generated/braindecode.preprocessing.preprocess.html#braindecode.preprocessing.preprocess" title="braindecode.preprocessing.preprocess" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-function"><span class="n">preprocess</span></a><span class="p">,</span> <a href="../../generated/braindecode.preprocessing.Preprocessor.html#braindecode.preprocessing.Preprocessor" title="braindecode.preprocessing.Preprocessor" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-class"><span class="n">Preprocessor</span></a><span class="p">,</span> <a href="../../generated/braindecode.preprocessing.create_fixed_length_windows.html#braindecode.preprocessing.create_fixed_length_windows" title="braindecode.preprocessing.create_fixed_length_windows" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-function"><span class="n">create_fixed_length_windows</span></a><span class="p">)</span>
</pre></div>
</div>
<p>We create a function that goes through the usual three steps of data
preparation: (1) data loading, (2) continuous data preprocessing,
(3) windowing and (4) windowed data preprocessing. We use the
<a class="reference internal" href="../../generated/braindecode.datasets.SleepPhysionet.html#braindecode.datasets.SleepPhysionet" title="braindecode.datasets.SleepPhysionet"><code class="xref py py-class docutils literal notranslate"><span class="pre">braindecode.datasets.SleepPhysionet</span></code></a> dataset for testing purposes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">prepare_data</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_recs</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">,</span> <span class="n">preload</span><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">):</span>
    <span class="k">if</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">:</span>
        <span class="n">tmp_dir</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryDirectory" title="tempfile.TemporaryDirectory" class="sphx-glr-backref-module-tempfile sphx-glr-backref-type-py-class"><span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span></a><span class="p">()</span>
        <span class="n">save_dir</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="o">.</span><span class="n">name</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">save_dir</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># (1) Load the data</span>
    <span class="n">concat_ds</span> <span class="o">=</span> <a href="../../generated/braindecode.datasets.SleepPhysionet.html#braindecode.datasets.SleepPhysionet" title="braindecode.datasets.SleepPhysionet" class="sphx-glr-backref-module-braindecode-datasets sphx-glr-backref-type-py-class"><span class="n">SleepPhysionet</span></a><span class="p">(</span>
        <span class="n">subject_ids</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_recs</span></a><span class="p">),</span> <span class="n">recording_ids</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crop_wake_mins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">preload</span><span class="o">=</span><span class="n">preload</span><span class="p">)</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="n">concat_ds</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;sfreq&#39;</span><span class="p">]</span>

    <span class="c1"># (2) Preprocess the continuous data</span>
    <span class="n">preprocessors</span> <span class="o">=</span> <span class="p">[</span>
        <a href="../../generated/braindecode.preprocessing.Preprocessor.html#braindecode.preprocessing.Preprocessor" title="braindecode.preprocessing.Preprocessor" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-class"><span class="n">Preprocessor</span></a><span class="p">(</span><span class="s1">&#39;crop&#39;</span><span class="p">,</span> <span class="n">tmin</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
        <a href="../../generated/braindecode.preprocessing.Preprocessor.html#braindecode.preprocessing.Preprocessor" title="braindecode.preprocessing.Preprocessor" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-class"><span class="n">Preprocessor</span></a><span class="p">(</span><span class="s1">&#39;filter&#39;</span><span class="p">,</span> <span class="n">l_freq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">h_freq</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="p">]</span>
    <a href="../../generated/braindecode.preprocessing.preprocess.html#braindecode.preprocessing.preprocess" title="braindecode.preprocessing.preprocess" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-function"><span class="n">preprocess</span></a><span class="p">(</span><span class="n">concat_ds</span><span class="p">,</span> <span class="n">preprocessors</span><span class="p">,</span> <span class="n">save_dir</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">)</span>

    <span class="c1"># (3) Window the data</span>
    <span class="n">windows_ds</span> <span class="o">=</span> <a href="../../generated/braindecode.preprocessing.create_fixed_length_windows.html#braindecode.preprocessing.create_fixed_length_windows" title="braindecode.preprocessing.create_fixed_length_windows" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-function"><span class="n">create_fixed_length_windows</span></a><span class="p">(</span>
        <span class="n">concat_ds</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="n">sfreq</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="n">sfreq</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">preload</span><span class="o">=</span><span class="n">preload</span><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">)</span>

    <span class="c1"># Preprocess the windowed data</span>
    <span class="n">preprocessors</span> <span class="o">=</span> <span class="p">[</span><a href="../../generated/braindecode.preprocessing.Preprocessor.html#braindecode.preprocessing.Preprocessor" title="braindecode.preprocessing.Preprocessor" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-class"><span class="n">Preprocessor</span></a><span class="p">(</span><a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.scale.html#sklearn.preprocessing.scale" title="sklearn.preprocessing.scale" class="sphx-glr-backref-module-sklearn-preprocessing sphx-glr-backref-type-py-function"><span class="n">scale</span></a><span class="p">,</span> <span class="n">channel_wise</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
    <a href="../../generated/braindecode.preprocessing.preprocess.html#braindecode.preprocessing.preprocess" title="braindecode.preprocessing.preprocess" class="sphx-glr-backref-module-braindecode-preprocessing sphx-glr-backref-type-py-function"><span class="n">preprocess</span></a><span class="p">(</span><span class="n">windows_ds</span><span class="p">,</span> <span class="n">preprocessors</span><span class="p">,</span> <span class="n">save_dir</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">)</span>
</pre></div>
</div>
<p>Next, we can run our function and measure its run time and peak memory usage
for each one of our 4 cases above. We call the function multiple times with
each configuration to get better estimates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To better characterize the run time vs. memory usage tradeoff for your
specific configuration (as this will differ based on available hardware,
data size and preprocessing operations), we recommend adapting this example
to your use case and running it on your machine.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_repets</span></a> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># Number of repetitions</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">all_n_recs</span></a> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># Number of recordings to load and preprocess</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">all_n_jobs</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>  <span class="c1"># Number of parallel processes</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">results</span></a> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">_</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_recs</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/itertools.html#itertools.product" title="itertools.product" class="sphx-glr-backref-module-itertools sphx-glr-backref-type-py-function"><span class="n">product</span></a><span class="p">(</span>
        <span class="nb">range</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_repets</span></a><span class="p">),</span> <span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">all_n_recs</span></a><span class="p">],</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">all_n_jobs</span></a><span class="p">):</span>

    <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/time.html#time.time" title="time.time" class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"><span class="n">time</span><span class="o">.</span><span class="n">time</span></a><span class="p">()</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mem</span></a> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">memory_usage</span><span class="p">(</span>
        <span class="n">proc</span><span class="o">=</span><span class="p">(</span><span class="n">prepare_data</span><span class="p">,</span> <span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_recs</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">],</span> <span class="p">{})))</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">time_taken</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/time.html#time.time" title="time.time" class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"><span class="n">time</span><span class="o">.</span><span class="n">time</span></a><span class="p">()</span> <span class="o">-</span> <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start</span></a>

    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">results</span></a><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;n_recs&#39;</span><span class="p">:</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_recs</span></a><span class="p">,</span>
        <span class="s1">&#39;max_mem&#39;</span><span class="p">:</span> <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mem</span></a><span class="p">,</span>
        <span class="s1">&#39;save&#39;</span><span class="p">:</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">,</span>
        <span class="s1">&#39;n_jobs&#39;</span><span class="p">:</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">,</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">time_taken</span></a>
    <span class="p">})</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>  0%|                                              | 0.00/51.1M [00:00&lt;?, ?B/s]
  0%|                                      | 131k/51.1M [00:00&lt;00:38, 1.31MB/s]
  1%|▏                                     | 262k/51.1M [00:00&lt;00:39, 1.29MB/s]
  1%|▎                                     | 410k/51.1M [00:00&lt;00:38, 1.33MB/s]
  1%|▍                                     | 543k/51.1M [00:00&lt;00:38, 1.33MB/s]
  1%|▌                                     | 676k/51.1M [00:00&lt;00:38, 1.33MB/s]
  2%|▌                                     | 809k/51.1M [00:00&lt;00:38, 1.32MB/s]
  2%|▋                                     | 950k/51.1M [00:00&lt;00:38, 1.31MB/s]
  2%|▊                                    | 1.10M/51.1M [00:00&lt;00:38, 1.31MB/s]
  2%|▉                                    | 1.25M/51.1M [00:00&lt;00:37, 1.32MB/s]
  3%|█                                    | 1.39M/51.1M [00:01&lt;00:37, 1.34MB/s]
  3%|█                                    | 1.54M/51.1M [00:01&lt;00:37, 1.33MB/s]
  3%|█▏                                   | 1.67M/51.1M [00:01&lt;00:37, 1.32MB/s]
  4%|█▎                                   | 1.81M/51.1M [00:01&lt;00:37, 1.31MB/s]
  4%|█▍                                   | 1.94M/51.1M [00:01&lt;00:37, 1.31MB/s]
  4%|█▌                                   | 2.08M/51.1M [00:01&lt;00:37, 1.30MB/s]
  4%|█▌                                   | 2.21M/51.1M [00:01&lt;00:37, 1.30MB/s]
  5%|█▋                                   | 2.34M/51.1M [00:01&lt;00:37, 1.29MB/s]
  5%|█▊                                   | 2.49M/51.1M [00:01&lt;00:37, 1.31MB/s]
  5%|█▉                                   | 2.62M/51.1M [00:01&lt;00:37, 1.30MB/s]
  5%|█▉                                   | 2.75M/51.1M [00:02&lt;00:37, 1.30MB/s]
  6%|██                                   | 2.88M/51.1M [00:02&lt;00:37, 1.29MB/s]
  6%|██▏                                  | 3.03M/51.1M [00:02&lt;00:36, 1.31MB/s]
  6%|██▎                                  | 3.16M/51.1M [00:02&lt;00:36, 1.31MB/s]
  6%|██▍                                  | 3.29M/51.1M [00:02&lt;00:37, 1.29MB/s]
  7%|██▍                                  | 3.42M/51.1M [00:02&lt;00:36, 1.29MB/s]
  7%|██▌                                  | 3.57M/51.1M [00:02&lt;00:36, 1.32MB/s]
  7%|██▋                                  | 3.72M/51.1M [00:02&lt;00:35, 1.33MB/s]
  8%|██▊                                  | 3.87M/51.1M [00:02&lt;00:34, 1.35MB/s]
  8%|██▉                                  | 4.01M/51.1M [00:03&lt;00:34, 1.37MB/s]
  8%|███                                  | 4.16M/51.1M [00:03&lt;00:34, 1.36MB/s]
  8%|███                                  | 4.31M/51.1M [00:03&lt;00:33, 1.39MB/s]
  9%|███▏                                 | 4.46M/51.1M [00:03&lt;00:33, 1.38MB/s]
  9%|███▎                                 | 4.60M/51.1M [00:03&lt;00:33, 1.37MB/s]
  9%|███▍                                 | 4.73M/51.1M [00:03&lt;00:34, 1.36MB/s]
 10%|███▌                                 | 4.87M/51.1M [00:03&lt;00:35, 1.31MB/s]
 10%|███▌                                 | 5.00M/51.1M [00:03&lt;00:35, 1.30MB/s]
 10%|███▋                                 | 5.13M/51.1M [00:03&lt;00:35, 1.28MB/s]
 10%|███▊                                 | 5.26M/51.1M [00:03&lt;00:35, 1.28MB/s]
 11%|███▉                                 | 5.41M/51.1M [00:04&lt;00:34, 1.32MB/s]
 11%|████                                 | 5.55M/51.1M [00:04&lt;00:34, 1.34MB/s]
 11%|████▏                                | 5.70M/51.1M [00:04&lt;00:33, 1.35MB/s]
 11%|████▏                                | 5.84M/51.1M [00:04&lt;00:33, 1.33MB/s]
 12%|████▎                                | 5.97M/51.1M [00:04&lt;00:34, 1.31MB/s]
 12%|████▍                                | 6.10M/51.1M [00:04&lt;00:34, 1.29MB/s]
 12%|████▌                                | 6.23M/51.1M [00:04&lt;00:34, 1.29MB/s]
 12%|████▌                                | 6.37M/51.1M [00:04&lt;00:35, 1.28MB/s]
 13%|████▋                                | 6.52M/51.1M [00:04&lt;00:34, 1.31MB/s]
 13%|████▊                                | 6.67M/51.1M [00:05&lt;00:33, 1.34MB/s]
 13%|████▉                                | 6.82M/51.1M [00:05&lt;00:32, 1.35MB/s]
 14%|█████                                | 6.95M/51.1M [00:05&lt;00:33, 1.33MB/s]
 14%|█████▏                               | 7.09M/51.1M [00:05&lt;00:33, 1.32MB/s]
 14%|█████▏                               | 7.24M/51.1M [00:05&lt;00:32, 1.34MB/s]
 14%|█████▎                               | 7.39M/51.1M [00:05&lt;00:32, 1.36MB/s]
 15%|█████▍                               | 7.54M/51.1M [00:05&lt;00:32, 1.35MB/s]
 15%|█████▌                               | 7.67M/51.1M [00:05&lt;00:32, 1.34MB/s]
 15%|█████▋                               | 7.82M/51.1M [00:05&lt;00:32, 1.33MB/s]
 16%|█████▊                               | 7.95M/51.1M [00:06&lt;00:32, 1.35MB/s]
 16%|█████▊                               | 8.09M/51.1M [00:06&lt;00:31, 1.35MB/s]
 16%|█████▉                               | 8.24M/51.1M [00:06&lt;00:31, 1.37MB/s]
 16%|██████                               | 8.39M/51.1M [00:06&lt;00:31, 1.35MB/s]
 17%|██████▏                              | 8.52M/51.1M [00:06&lt;00:31, 1.35MB/s]
 17%|██████▎                              | 8.66M/51.1M [00:06&lt;00:31, 1.35MB/s]
 17%|██████▎                              | 8.79M/51.1M [00:06&lt;00:31, 1.34MB/s]
 17%|██████▍                              | 8.93M/51.1M [00:06&lt;00:32, 1.30MB/s]
 18%|██████▌                              | 9.08M/51.1M [00:06&lt;00:31, 1.33MB/s]
 18%|██████▋                              | 9.21M/51.1M [00:06&lt;00:31, 1.32MB/s]
 18%|██████▊                              | 9.34M/51.1M [00:07&lt;00:31, 1.31MB/s]
 19%|██████▊                              | 9.48M/51.1M [00:07&lt;00:31, 1.31MB/s]
 19%|██████▉                              | 9.61M/51.1M [00:07&lt;00:31, 1.30MB/s]
 19%|███████                              | 9.75M/51.1M [00:07&lt;00:31, 1.30MB/s]
 19%|███████▏                             | 9.90M/51.1M [00:07&lt;00:30, 1.33MB/s]
 20%|███████▎                             | 10.0M/51.1M [00:07&lt;00:30, 1.36MB/s]
 20%|███████▍                             | 10.2M/51.1M [00:07&lt;00:29, 1.37MB/s]
 20%|███████▍                             | 10.4M/51.1M [00:07&lt;00:28, 1.41MB/s]
 21%|███████▌                             | 10.5M/51.1M [00:07&lt;00:28, 1.40MB/s]
 21%|███████▋                             | 10.6M/51.1M [00:08&lt;00:29, 1.39MB/s]
 21%|███████▊                             | 10.8M/51.1M [00:08&lt;00:29, 1.38MB/s]
 21%|███████▉                             | 10.9M/51.1M [00:08&lt;00:29, 1.35MB/s]
 22%|████████                             | 11.1M/51.1M [00:08&lt;00:30, 1.30MB/s]
 22%|████████                             | 11.2M/51.1M [00:08&lt;00:30, 1.30MB/s]
 22%|████████▏                            | 11.3M/51.1M [00:08&lt;00:30, 1.30MB/s]
 22%|████████▎                            | 11.5M/51.1M [00:08&lt;00:30, 1.28MB/s]
 23%|████████▍                            | 11.6M/51.1M [00:08&lt;00:30, 1.28MB/s]
 23%|████████▌                            | 11.7M/51.1M [00:08&lt;00:30, 1.30MB/s]
 23%|████████▌                            | 11.9M/51.1M [00:08&lt;00:30, 1.28MB/s]
 23%|████████▋                            | 12.0M/51.1M [00:09&lt;00:30, 1.28MB/s]
 24%|████████▊                            | 12.1M/51.1M [00:09&lt;00:30, 1.28MB/s]
 24%|████████▉                            | 12.3M/51.1M [00:09&lt;00:30, 1.28MB/s]
 24%|████████▉                            | 12.4M/51.1M [00:09&lt;00:29, 1.30MB/s]
 25%|█████████                            | 12.6M/51.1M [00:09&lt;00:29, 1.31MB/s]
 25%|█████████▏                           | 12.7M/51.1M [00:09&lt;00:29, 1.32MB/s]
 25%|█████████▎                           | 12.9M/51.1M [00:09&lt;00:28, 1.35MB/s]
 25%|█████████▍                           | 13.0M/51.1M [00:09&lt;00:27, 1.38MB/s]
 26%|█████████▌                           | 13.2M/51.1M [00:09&lt;00:27, 1.39MB/s]
 26%|█████████▋                           | 13.3M/51.1M [00:10&lt;00:27, 1.40MB/s]
 26%|█████████▋                           | 13.4M/51.1M [00:10&lt;00:26, 1.40MB/s]
 27%|█████████▊                           | 13.6M/51.1M [00:10&lt;00:27, 1.35MB/s]
 27%|█████████▉                           | 13.7M/51.1M [00:10&lt;00:28, 1.33MB/s]
 27%|██████████                           | 13.9M/51.1M [00:10&lt;00:27, 1.34MB/s]
 27%|██████████▏                          | 14.0M/51.1M [00:10&lt;00:27, 1.34MB/s]
 28%|██████████▎                          | 14.2M/51.1M [00:10&lt;00:27, 1.36MB/s]
 28%|██████████▎                          | 14.3M/51.1M [00:10&lt;00:26, 1.37MB/s]
 28%|██████████▍                          | 14.5M/51.1M [00:10&lt;00:26, 1.36MB/s]
 29%|██████████▌                          | 14.6M/51.1M [00:10&lt;00:26, 1.36MB/s]
 29%|██████████▋                          | 14.8M/51.1M [00:11&lt;00:26, 1.37MB/s]
 29%|██████████▊                          | 14.9M/51.1M [00:11&lt;00:26, 1.37MB/s]
 29%|██████████▉                          | 15.0M/51.1M [00:11&lt;00:26, 1.36MB/s]
 30%|██████████▉                          | 15.2M/51.1M [00:11&lt;00:26, 1.35MB/s]
 30%|███████████                          | 15.3M/51.1M [00:11&lt;00:26, 1.35MB/s]
 30%|███████████▏                         | 15.5M/51.1M [00:11&lt;00:26, 1.35MB/s]
 31%|███████████▎                         | 15.6M/51.1M [00:11&lt;00:26, 1.36MB/s]
 31%|███████████▍                         | 15.8M/51.1M [00:11&lt;00:26, 1.36MB/s]
 31%|███████████▌                         | 15.9M/51.1M [00:11&lt;00:25, 1.39MB/s]
 31%|███████████▋                         | 16.1M/51.1M [00:12&lt;00:24, 1.43MB/s]
 32%|███████████▊                         | 16.3M/51.1M [00:12&lt;00:23, 1.46MB/s]
 32%|███████████▊                         | 16.4M/51.1M [00:12&lt;00:24, 1.44MB/s]
 32%|███████████▉                         | 16.5M/51.1M [00:12&lt;00:24, 1.41MB/s]
 33%|████████████                         | 16.7M/51.1M [00:12&lt;00:24, 1.41MB/s]
 33%|████████████▏                        | 16.8M/51.1M [00:12&lt;00:24, 1.38MB/s]
 33%|████████████▎                        | 17.0M/51.1M [00:12&lt;00:25, 1.35MB/s]
 33%|████████████▍                        | 17.1M/51.1M [00:12&lt;00:25, 1.34MB/s]
 34%|████████████▍                        | 17.2M/51.1M [00:12&lt;00:25, 1.34MB/s]
 34%|████████████▌                        | 17.4M/51.1M [00:13&lt;00:25, 1.31MB/s]
 34%|████████████▋                        | 17.5M/51.1M [00:13&lt;00:25, 1.30MB/s]
 35%|████████████▊                        | 17.7M/51.1M [00:13&lt;00:25, 1.31MB/s]
 35%|████████████▉                        | 17.8M/51.1M [00:13&lt;00:25, 1.33MB/s]
 35%|████████████▉                        | 17.9M/51.1M [00:13&lt;00:25, 1.32MB/s]
 35%|█████████████                        | 18.1M/51.1M [00:13&lt;00:25, 1.31MB/s]
 36%|█████████████▏                       | 18.2M/51.1M [00:13&lt;00:24, 1.34MB/s]
 36%|█████████████▎                       | 18.3M/51.1M [00:13&lt;00:24, 1.33MB/s]
 36%|█████████████▍                       | 18.5M/51.1M [00:13&lt;00:25, 1.29MB/s]
 36%|█████████████▍                       | 18.6M/51.1M [00:13&lt;00:25, 1.29MB/s]
 37%|█████████████▌                       | 18.8M/51.1M [00:14&lt;00:24, 1.31MB/s]
 37%|█████████████▋                       | 18.9M/51.1M [00:14&lt;00:24, 1.33MB/s]
 37%|█████████████▊                       | 19.1M/51.1M [00:14&lt;00:23, 1.37MB/s]
 38%|█████████████▉                       | 19.2M/51.1M [00:14&lt;00:23, 1.37MB/s]
 38%|██████████████                       | 19.4M/51.1M [00:14&lt;00:22, 1.39MB/s]
 38%|██████████████▏                      | 19.5M/51.1M [00:14&lt;00:22, 1.40MB/s]
 38%|██████████████▏                      | 19.7M/51.1M [00:14&lt;00:22, 1.41MB/s]
 39%|██████████████▎                      | 19.8M/51.1M [00:14&lt;00:22, 1.40MB/s]
 39%|██████████████▍                      | 20.0M/51.1M [00:14&lt;00:22, 1.40MB/s]
 39%|██████████████▌                      | 20.1M/51.1M [00:15&lt;00:22, 1.39MB/s]
 40%|██████████████▋                      | 20.2M/51.1M [00:15&lt;00:22, 1.39MB/s]
 40%|██████████████▊                      | 20.4M/51.1M [00:15&lt;00:23, 1.33MB/s]
 40%|██████████████▊                      | 20.5M/51.1M [00:15&lt;00:23, 1.32MB/s]
 40%|██████████████▉                      | 20.7M/51.1M [00:15&lt;00:22, 1.33MB/s]
 41%|███████████████                      | 20.8M/51.1M [00:15&lt;00:22, 1.35MB/s]
 41%|███████████████▏                     | 20.9M/51.1M [00:15&lt;00:22, 1.35MB/s]
 41%|███████████████▎                     | 21.1M/51.1M [00:15&lt;00:22, 1.33MB/s]
 42%|███████████████▎                     | 21.2M/51.1M [00:15&lt;00:22, 1.36MB/s]
 42%|███████████████▍                     | 21.4M/51.1M [00:15&lt;00:21, 1.35MB/s]
 42%|███████████████▌                     | 21.5M/51.1M [00:16&lt;00:22, 1.29MB/s]
 42%|███████████████▋                     | 21.6M/51.1M [00:16&lt;00:22, 1.30MB/s]
 43%|███████████████▊                     | 21.8M/51.1M [00:16&lt;00:22, 1.32MB/s]
 43%|███████████████▉                     | 21.9M/51.1M [00:16&lt;00:21, 1.33MB/s]
 43%|███████████████▉                     | 22.1M/51.1M [00:16&lt;00:22, 1.32MB/s]
 44%|████████████████                     | 22.2M/51.1M [00:16&lt;00:20, 1.38MB/s]
 44%|████████████████▏                    | 22.4M/51.1M [00:16&lt;00:21, 1.36MB/s]
 44%|████████████████▎                    | 22.5M/51.1M [00:16&lt;00:21, 1.35MB/s]
 44%|████████████████▍                    | 22.7M/51.1M [00:16&lt;00:21, 1.34MB/s]
 45%|████████████████▌                    | 22.8M/51.1M [00:17&lt;00:21, 1.34MB/s]
 45%|████████████████▌                    | 23.0M/51.1M [00:17&lt;00:21, 1.31MB/s]
 45%|████████████████▋                    | 23.1M/51.1M [00:17&lt;00:20, 1.34MB/s]
 45%|████████████████▊                    | 23.2M/51.1M [00:17&lt;00:20, 1.33MB/s]
 46%|████████████████▉                    | 23.4M/51.1M [00:17&lt;00:20, 1.33MB/s]
 46%|█████████████████                    | 23.5M/51.1M [00:17&lt;00:20, 1.33MB/s]
 46%|█████████████████▏                   | 23.7M/51.1M [00:17&lt;00:20, 1.31MB/s]
 47%|█████████████████▏                   | 23.8M/51.1M [00:17&lt;00:20, 1.33MB/s]
 47%|█████████████████▎                   | 24.0M/51.1M [00:17&lt;00:20, 1.33MB/s]
 47%|█████████████████▍                   | 24.1M/51.1M [00:18&lt;00:20, 1.31MB/s]
 47%|█████████████████▌                   | 24.2M/51.1M [00:18&lt;00:20, 1.32MB/s]
 48%|█████████████████▋                   | 24.4M/51.1M [00:18&lt;00:20, 1.32MB/s]
 48%|█████████████████▋                   | 24.5M/51.1M [00:18&lt;00:20, 1.31MB/s]
 48%|█████████████████▊                   | 24.6M/51.1M [00:18&lt;00:20, 1.30MB/s]
 48%|█████████████████▉                   | 24.8M/51.1M [00:18&lt;00:20, 1.30MB/s]
 49%|██████████████████                   | 24.9M/51.1M [00:18&lt;00:20, 1.30MB/s]
 49%|██████████████████                   | 25.0M/51.1M [00:18&lt;00:20, 1.30MB/s]
 49%|██████████████████▏                  | 25.2M/51.1M [00:18&lt;00:19, 1.30MB/s]
 49%|██████████████████▎                  | 25.3M/51.1M [00:18&lt;00:19, 1.30MB/s]
 50%|██████████████████▍                  | 25.4M/51.1M [00:19&lt;00:19, 1.34MB/s]
 50%|██████████████████▌                  | 25.6M/51.1M [00:19&lt;00:19, 1.33MB/s]
 50%|██████████████████▋                  | 25.7M/51.1M [00:19&lt;00:18, 1.36MB/s]
 51%|██████████████████▋                  | 25.9M/51.1M [00:19&lt;00:18, 1.35MB/s]
 51%|██████████████████▊                  | 26.0M/51.1M [00:19&lt;00:18, 1.35MB/s]
 51%|██████████████████▉                  | 26.2M/51.1M [00:19&lt;00:18, 1.34MB/s]
 51%|███████████████████                  | 26.3M/51.1M [00:19&lt;00:18, 1.34MB/s]
 52%|███████████████████▏                 | 26.5M/51.1M [00:19&lt;00:18, 1.34MB/s]
 52%|███████████████████▏                 | 26.6M/51.1M [00:19&lt;00:18, 1.31MB/s]
 52%|███████████████████▎                 | 26.7M/51.1M [00:20&lt;00:18, 1.32MB/s]
 53%|███████████████████▍                 | 26.9M/51.1M [00:20&lt;00:18, 1.35MB/s]
 53%|███████████████████▌                 | 27.0M/51.1M [00:20&lt;00:17, 1.35MB/s]
 53%|███████████████████▋                 | 27.2M/51.1M [00:20&lt;00:17, 1.34MB/s]
 53%|███████████████████▊                 | 27.3M/51.1M [00:20&lt;00:17, 1.33MB/s]
 54%|███████████████████▊                 | 27.4M/51.1M [00:20&lt;00:18, 1.31MB/s]
 54%|███████████████████▉                 | 27.6M/51.1M [00:20&lt;00:18, 1.31MB/s]
 54%|████████████████████                 | 27.7M/51.1M [00:20&lt;00:17, 1.30MB/s]
 54%|████████████████████▏                | 27.9M/51.1M [00:20&lt;00:17, 1.33MB/s]
 55%|████████████████████▎                | 28.0M/51.1M [00:20&lt;00:17, 1.31MB/s]
 55%|████████████████████▎                | 28.1M/51.1M [00:21&lt;00:17, 1.30MB/s]
 55%|████████████████████▍                | 28.2M/51.1M [00:21&lt;00:17, 1.29MB/s]
 56%|████████████████████▌                | 28.4M/51.1M [00:21&lt;00:17, 1.28MB/s]
 56%|████████████████████▋                | 28.5M/51.1M [00:21&lt;00:17, 1.28MB/s]
 56%|████████████████████▋                | 28.6M/51.1M [00:21&lt;00:17, 1.29MB/s]
 56%|████████████████████▊                | 28.8M/51.1M [00:21&lt;00:17, 1.28MB/s]
 57%|████████████████████▉                | 28.9M/51.1M [00:21&lt;00:17, 1.30MB/s]
 57%|█████████████████████                | 29.0M/51.1M [00:21&lt;00:17, 1.29MB/s]
 57%|█████████████████████                | 29.2M/51.1M [00:21&lt;00:16, 1.29MB/s]
 57%|█████████████████████▏               | 29.3M/51.1M [00:21&lt;00:16, 1.30MB/s]
 58%|█████████████████████▎               | 29.5M/51.1M [00:22&lt;00:16, 1.32MB/s]
 58%|█████████████████████▍               | 29.6M/51.1M [00:22&lt;00:16, 1.33MB/s]
 58%|█████████████████████▌               | 29.7M/51.1M [00:22&lt;00:16, 1.33MB/s]
 58%|█████████████████████▋               | 29.9M/51.1M [00:22&lt;00:16, 1.31MB/s]
 59%|█████████████████████▋               | 30.0M/51.1M [00:22&lt;00:16, 1.30MB/s]
 59%|█████████████████████▊               | 30.1M/51.1M [00:22&lt;00:16, 1.30MB/s]
 59%|█████████████████████▉               | 30.3M/51.1M [00:22&lt;00:16, 1.30MB/s]
 60%|██████████████████████               | 30.4M/51.1M [00:22&lt;00:15, 1.33MB/s]
 60%|██████████████████████               | 30.6M/51.1M [00:22&lt;00:15, 1.33MB/s]
 60%|██████████████████████▏              | 30.7M/51.1M [00:23&lt;00:15, 1.32MB/s]
 60%|██████████████████████▎              | 30.8M/51.1M [00:23&lt;00:15, 1.28MB/s]
 61%|██████████████████████▍              | 30.9M/51.1M [00:23&lt;00:15, 1.28MB/s]
 61%|██████████████████████▍              | 31.1M/51.1M [00:23&lt;00:15, 1.27MB/s]
 61%|██████████████████████▌              | 31.2M/51.1M [00:23&lt;00:15, 1.26MB/s]
 61%|██████████████████████▋              | 31.4M/51.1M [00:23&lt;00:15, 1.29MB/s]
 62%|██████████████████████▊              | 31.5M/51.1M [00:23&lt;00:15, 1.29MB/s]
 62%|██████████████████████▉              | 31.6M/51.1M [00:23&lt;00:14, 1.31MB/s]
 62%|███████████████████████              | 31.8M/51.1M [00:23&lt;00:14, 1.32MB/s]
 62%|███████████████████████              | 31.9M/51.1M [00:23&lt;00:14, 1.30MB/s]
 63%|███████████████████████▏             | 32.0M/51.1M [00:24&lt;00:14, 1.30MB/s]
 63%|███████████████████████▎             | 32.2M/51.1M [00:24&lt;00:14, 1.29MB/s]
 63%|███████████████████████▍             | 32.3M/51.1M [00:24&lt;00:14, 1.32MB/s]
 64%|███████████████████████▍             | 32.5M/51.1M [00:24&lt;00:14, 1.30MB/s]
 64%|███████████████████████▌             | 32.6M/51.1M [00:24&lt;00:14, 1.28MB/s]
 64%|███████████████████████▋             | 32.7M/51.1M [00:24&lt;00:14, 1.30MB/s]
 64%|███████████████████████▊             | 32.9M/51.1M [00:24&lt;00:14, 1.30MB/s]
 65%|███████████████████████▉             | 33.0M/51.1M [00:24&lt;00:14, 1.29MB/s]
 65%|███████████████████████▉             | 33.1M/51.1M [00:24&lt;00:13, 1.30MB/s]
 65%|████████████████████████             | 33.3M/51.1M [00:25&lt;00:13, 1.29MB/s]
 65%|████████████████████████▏            | 33.4M/51.1M [00:25&lt;00:13, 1.28MB/s]
 66%|████████████████████████▎            | 33.5M/51.1M [00:25&lt;00:13, 1.27MB/s]
 66%|████████████████████████▍            | 33.7M/51.1M [00:25&lt;00:13, 1.31MB/s]
 66%|████████████████████████▌            | 33.8M/51.1M [00:25&lt;00:12, 1.36MB/s]
 67%|████████████████████████▌            | 34.0M/51.1M [00:25&lt;00:12, 1.38MB/s]
 67%|████████████████████████▋            | 34.1M/51.1M [00:25&lt;00:12, 1.38MB/s]
 67%|████████████████████████▊            | 34.3M/51.1M [00:25&lt;00:12, 1.37MB/s]
 67%|████████████████████████▉            | 34.4M/51.1M [00:25&lt;00:12, 1.36MB/s]
 68%|█████████████████████████            | 34.6M/51.1M [00:26&lt;00:12, 1.36MB/s]
 68%|█████████████████████████▏           | 34.7M/51.1M [00:26&lt;00:12, 1.35MB/s]
 68%|█████████████████████████▏           | 34.8M/51.1M [00:26&lt;00:12, 1.33MB/s]
 68%|█████████████████████████▎           | 35.0M/51.1M [00:26&lt;00:12, 1.26MB/s]
 69%|█████████████████████████▍           | 35.1M/51.1M [00:26&lt;00:12, 1.23MB/s]
 69%|█████████████████████████▌           | 35.2M/51.1M [00:26&lt;00:12, 1.24MB/s]
 69%|█████████████████████████▌           | 35.4M/51.1M [00:26&lt;00:12, 1.24MB/s]
 69%|█████████████████████████▋           | 35.5M/51.1M [00:26&lt;00:12, 1.23MB/s]
 70%|█████████████████████████▊           | 35.6M/51.1M [00:26&lt;00:12, 1.25MB/s]
 70%|█████████████████████████▉           | 35.8M/51.1M [00:26&lt;00:12, 1.27MB/s]
 70%|█████████████████████████▉           | 35.9M/51.1M [00:27&lt;00:11, 1.30MB/s]
 71%|██████████████████████████           | 36.1M/51.1M [00:27&lt;00:11, 1.32MB/s]
 71%|██████████████████████████▏          | 36.2M/51.1M [00:27&lt;00:11, 1.33MB/s]
 71%|██████████████████████████▎          | 36.4M/51.1M [00:27&lt;00:10, 1.34MB/s]
 71%|██████████████████████████▍          | 36.5M/51.1M [00:27&lt;00:10, 1.34MB/s]
 72%|██████████████████████████▌          | 36.6M/51.1M [00:27&lt;00:10, 1.32MB/s]
 72%|██████████████████████████▋          | 36.8M/51.1M [00:27&lt;00:10, 1.33MB/s]
 72%|██████████████████████████▋          | 36.9M/51.1M [00:27&lt;00:10, 1.33MB/s]
 72%|██████████████████████████▊          | 37.0M/51.1M [00:27&lt;00:10, 1.32MB/s]
 73%|██████████████████████████▉          | 37.2M/51.1M [00:28&lt;00:10, 1.31MB/s]
 73%|███████████████████████████          | 37.3M/51.1M [00:28&lt;00:10, 1.28MB/s]
 73%|███████████████████████████          | 37.5M/51.1M [00:28&lt;00:10, 1.25MB/s]
 74%|███████████████████████████▏         | 37.6M/51.1M [00:28&lt;00:10, 1.25MB/s]
 74%|███████████████████████████▎         | 37.7M/51.1M [00:28&lt;00:10, 1.26MB/s]
 74%|███████████████████████████▍         | 37.8M/51.1M [00:28&lt;00:10, 1.26MB/s]
 74%|███████████████████████████▌         | 38.0M/51.1M [00:28&lt;00:10, 1.29MB/s]
 75%|███████████████████████████▌         | 38.1M/51.1M [00:28&lt;00:09, 1.31MB/s]
 75%|███████████████████████████▋         | 38.3M/51.1M [00:28&lt;00:09, 1.34MB/s]
 75%|███████████████████████████▊         | 38.4M/51.1M [00:28&lt;00:09, 1.35MB/s]
 75%|███████████████████████████▉         | 38.6M/51.1M [00:29&lt;00:09, 1.35MB/s]
 76%|████████████████████████████         | 38.7M/51.1M [00:29&lt;00:09, 1.34MB/s]
 76%|████████████████████████████▏        | 38.9M/51.1M [00:29&lt;00:09, 1.33MB/s]
 76%|████████████████████████████▏        | 39.0M/51.1M [00:29&lt;00:09, 1.34MB/s]
 77%|████████████████████████████▎        | 39.2M/51.1M [00:29&lt;00:08, 1.33MB/s]
 77%|████████████████████████████▍        | 39.3M/51.1M [00:29&lt;00:08, 1.34MB/s]
 77%|████████████████████████████▌        | 39.5M/51.1M [00:29&lt;00:08, 1.35MB/s]
 77%|████████████████████████████▋        | 39.6M/51.1M [00:29&lt;00:08, 1.33MB/s]
 78%|████████████████████████████▊        | 39.7M/51.1M [00:29&lt;00:08, 1.31MB/s]
 78%|████████████████████████████▊        | 39.9M/51.1M [00:30&lt;00:08, 1.30MB/s]
 78%|████████████████████████████▉        | 40.0M/51.1M [00:30&lt;00:08, 1.29MB/s]
 79%|█████████████████████████████        | 40.1M/51.1M [00:30&lt;00:08, 1.28MB/s]
 79%|█████████████████████████████▏       | 40.3M/51.1M [00:30&lt;00:08, 1.28MB/s]
 79%|█████████████████████████████▏       | 40.4M/51.1M [00:30&lt;00:08, 1.26MB/s]
 79%|█████████████████████████████▎       | 40.5M/51.1M [00:30&lt;00:08, 1.27MB/s]
 80%|█████████████████████████████▍       | 40.7M/51.1M [00:30&lt;00:08, 1.29MB/s]
 80%|█████████████████████████████▌       | 40.8M/51.1M [00:30&lt;00:08, 1.29MB/s]
 80%|█████████████████████████████▋       | 40.9M/51.1M [00:30&lt;00:07, 1.30MB/s]
 80%|█████████████████████████████▋       | 41.1M/51.1M [00:31&lt;00:07, 1.30MB/s]
 81%|█████████████████████████████▊       | 41.2M/51.1M [00:31&lt;00:07, 1.30MB/s]
 81%|█████████████████████████████▉       | 41.3M/51.1M [00:31&lt;00:07, 1.29MB/s]
 81%|██████████████████████████████       | 41.5M/51.1M [00:31&lt;00:07, 1.31MB/s]
 81%|██████████████████████████████▏      | 41.6M/51.1M [00:31&lt;00:07, 1.29MB/s]
 82%|██████████████████████████████▏      | 41.7M/51.1M [00:31&lt;00:07, 1.28MB/s]
 82%|██████████████████████████████▎      | 41.9M/51.1M [00:31&lt;00:07, 1.27MB/s]
 82%|██████████████████████████████▍      | 42.0M/51.1M [00:31&lt;00:07, 1.30MB/s]
 83%|██████████████████████████████▌      | 42.2M/51.1M [00:31&lt;00:06, 1.32MB/s]
 83%|██████████████████████████████▋      | 42.3M/51.1M [00:31&lt;00:06, 1.34MB/s]
 83%|██████████████████████████████▋      | 42.5M/51.1M [00:32&lt;00:06, 1.34MB/s]
 83%|██████████████████████████████▊      | 42.6M/51.1M [00:32&lt;00:06, 1.34MB/s]
 84%|██████████████████████████████▉      | 42.7M/51.1M [00:32&lt;00:06, 1.34MB/s]
 84%|███████████████████████████████      | 42.9M/51.1M [00:32&lt;00:06, 1.32MB/s]
 84%|███████████████████████████████▏     | 43.0M/51.1M [00:32&lt;00:06, 1.31MB/s]
 84%|███████████████████████████████▏     | 43.1M/51.1M [00:32&lt;00:06, 1.30MB/s]
 85%|███████████████████████████████▎     | 43.3M/51.1M [00:32&lt;00:06, 1.27MB/s]
 85%|███████████████████████████████▍     | 43.4M/51.1M [00:32&lt;00:06, 1.25MB/s]
 85%|███████████████████████████████▌     | 43.5M/51.1M [00:32&lt;00:06, 1.25MB/s]
 85%|███████████████████████████████▌     | 43.7M/51.1M [00:33&lt;00:05, 1.28MB/s]
 86%|███████████████████████████████▋     | 43.8M/51.1M [00:33&lt;00:05, 1.29MB/s]
 86%|███████████████████████████████▊     | 44.0M/51.1M [00:33&lt;00:05, 1.31MB/s]
 86%|███████████████████████████████▉     | 44.1M/51.1M [00:33&lt;00:05, 1.31MB/s]
 87%|████████████████████████████████     | 44.2M/51.1M [00:33&lt;00:05, 1.30MB/s]
 87%|████████████████████████████████     | 44.4M/51.1M [00:33&lt;00:05, 1.28MB/s]
 87%|████████████████████████████████▏    | 44.5M/51.1M [00:33&lt;00:05, 1.27MB/s]
 87%|████████████████████████████████▎    | 44.6M/51.1M [00:33&lt;00:05, 1.25MB/s]
 88%|████████████████████████████████▍    | 44.8M/51.1M [00:33&lt;00:05, 1.27MB/s]
 88%|████████████████████████████████▍    | 44.9M/51.1M [00:33&lt;00:04, 1.27MB/s]
 88%|████████████████████████████████▌    | 45.0M/51.1M [00:34&lt;00:04, 1.26MB/s]
 88%|████████████████████████████████▋    | 45.2M/51.1M [00:34&lt;00:04, 1.27MB/s]
 89%|████████████████████████████████▊    | 45.3M/51.1M [00:34&lt;00:04, 1.30MB/s]
 89%|████████████████████████████████▉    | 45.4M/51.1M [00:34&lt;00:04, 1.29MB/s]
 89%|████████████████████████████████▉    | 45.6M/51.1M [00:34&lt;00:04, 1.30MB/s]
 89%|█████████████████████████████████    | 45.7M/51.1M [00:34&lt;00:04, 1.33MB/s]
 90%|█████████████████████████████████▏   | 45.9M/51.1M [00:34&lt;00:03, 1.34MB/s]
 90%|█████████████████████████████████▎   | 46.0M/51.1M [00:34&lt;00:03, 1.35MB/s]
 90%|█████████████████████████████████▍   | 46.2M/51.1M [00:34&lt;00:03, 1.35MB/s]
 91%|█████████████████████████████████▌   | 46.3M/51.1M [00:35&lt;00:03, 1.34MB/s]
 91%|█████████████████████████████████▋   | 46.5M/51.1M [00:35&lt;00:03, 1.33MB/s]
 91%|█████████████████████████████████▋   | 46.6M/51.1M [00:35&lt;00:03, 1.33MB/s]
 91%|█████████████████████████████████▊   | 46.7M/51.1M [00:35&lt;00:03, 1.30MB/s]
 92%|█████████████████████████████████▉   | 46.9M/51.1M [00:35&lt;00:03, 1.30MB/s]
 92%|██████████████████████████████████   | 47.0M/51.1M [00:35&lt;00:03, 1.32MB/s]
 92%|██████████████████████████████████▏  | 47.2M/51.1M [00:35&lt;00:02, 1.33MB/s]
 93%|██████████████████████████████████▏  | 47.3M/51.1M [00:35&lt;00:02, 1.34MB/s]
 93%|██████████████████████████████████▎  | 47.4M/51.1M [00:35&lt;00:02, 1.34MB/s]
 93%|██████████████████████████████████▍  | 47.6M/51.1M [00:35&lt;00:02, 1.33MB/s]
 93%|██████████████████████████████████▌  | 47.7M/51.1M [00:36&lt;00:02, 1.31MB/s]
 94%|██████████████████████████████████▋  | 47.8M/51.1M [00:36&lt;00:02, 1.30MB/s]
 94%|██████████████████████████████████▋  | 48.0M/51.1M [00:36&lt;00:02, 1.28MB/s]
 94%|██████████████████████████████████▊  | 48.1M/51.1M [00:36&lt;00:02, 1.28MB/s]
 94%|██████████████████████████████████▉  | 48.2M/51.1M [00:36&lt;00:02, 1.28MB/s]
 95%|███████████████████████████████████  | 48.4M/51.1M [00:36&lt;00:02, 1.24MB/s]
 95%|███████████████████████████████████  | 48.5M/51.1M [00:36&lt;00:02, 1.24MB/s]
 95%|███████████████████████████████████▏ | 48.6M/51.1M [00:36&lt;00:01, 1.25MB/s]
 95%|███████████████████████████████████▎ | 48.7M/51.1M [00:36&lt;00:01, 1.27MB/s]
 96%|███████████████████████████████████▍ | 48.9M/51.1M [00:37&lt;00:01, 1.29MB/s]
 96%|███████████████████████████████████▍ | 49.0M/51.1M [00:37&lt;00:01, 1.30MB/s]
 96%|███████████████████████████████████▌ | 49.2M/51.1M [00:37&lt;00:01, 1.33MB/s]
 97%|███████████████████████████████████▋ | 49.3M/51.1M [00:37&lt;00:01, 1.34MB/s]
 97%|███████████████████████████████████▊ | 49.5M/51.1M [00:37&lt;00:01, 1.34MB/s]
 97%|███████████████████████████████████▉ | 49.6M/51.1M [00:37&lt;00:01, 1.33MB/s]
 97%|████████████████████████████████████ | 49.7M/51.1M [00:37&lt;00:01, 1.33MB/s]
 98%|████████████████████████████████████ | 49.9M/51.1M [00:37&lt;00:00, 1.29MB/s]
 98%|████████████████████████████████████▏| 50.0M/51.1M [00:37&lt;00:00, 1.29MB/s]
 98%|████████████████████████████████████▎| 50.2M/51.1M [00:37&lt;00:00, 1.30MB/s]
 98%|████████████████████████████████████▍| 50.3M/51.1M [00:38&lt;00:00, 1.30MB/s]
 99%|████████████████████████████████████▌| 50.4M/51.1M [00:38&lt;00:00, 1.32MB/s]
 99%|████████████████████████████████████▌| 50.6M/51.1M [00:38&lt;00:00, 1.34MB/s]
 99%|████████████████████████████████████▋| 50.7M/51.1M [00:38&lt;00:00, 1.34MB/s]
100%|████████████████████████████████████▊| 50.9M/51.1M [00:38&lt;00:00, 1.33MB/s]
100%|████████████████████████████████████▉| 51.0M/51.1M [00:38&lt;00:00, 1.32MB/s]
  0%|                                              | 0.00/51.1M [00:00&lt;?, ?B/s]
100%|█████████████████████████████████████| 51.1M/51.1M [00:00&lt;00:00, 95.0GB/s]

  0%|                                              | 0.00/3.90k [00:00&lt;?, ?B/s]
  0%|                                              | 0.00/3.90k [00:00&lt;?, ?B/s]
100%|█████████████████████████████████████| 3.90k/3.90k [00:00&lt;00:00, 4.27MB/s]
Download complete in 39s (48.7 MB)
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Reading 0 ... 2507000  =      0.000 ... 25070.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Writing /tmp/tmpne1wtn7u/0/0-raw.fif
Closing /tmp/tmpne1wtn7u/0/0-raw.fif
[done]
Reading 0 ... 3260000  =      0.000 ... 32600.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Writing /tmp/tmpne1wtn7u/1/1-raw.fif
Closing /tmp/tmpne1wtn7u/1/1-raw.fif
[done]
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:708: UserWarning: Chosen directory /tmp/tmpne1wtn7u contains other subdirectories or files [&#39;0&#39;].
  warnings.warn(f&#39;Chosen directory {path} contains other &#39;
Opening raw data file /tmp/tmpne1wtn7u/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpne1wtn7u/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Reading 0 ... 2507000  =      0.000 ... 25070.000 secs...
Writing /tmp/tmpne1wtn7u/0/0-raw.fif
Closing /tmp/tmpne1wtn7u/0/0-raw.fif
[done]
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:700: UserWarning: The number of saved datasets (1) does not match the number of existing subdirectories (2). You may now encounter a mix of differently preprocessed datasets!
  warnings.warn(f&quot;The number of saved datasets ({i_ds+1+offset}) &quot;
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:708: UserWarning: Chosen directory /tmp/tmpne1wtn7u contains other subdirectories or files [&#39;1&#39;].
  warnings.warn(f&#39;Chosen directory {path} contains other &#39;
Reading 0 ... 3260000  =      0.000 ... 32600.000 secs...
Writing /tmp/tmpne1wtn7u/1/1-raw.fif
Closing /tmp/tmpne1wtn7u/1/1-raw.fif
[done]
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:708: UserWarning: Chosen directory /tmp/tmpne1wtn7u contains other subdirectories or files [&#39;0&#39;].
  warnings.warn(f&#39;Chosen directory {path} contains other &#39;
Opening raw data file /tmp/tmpne1wtn7u/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpne1wtn7u/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Opening raw data file /tmp/tmpojz_att1/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpojz_att1/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Opening raw data file /tmp/tmpojz_att1/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpojz_att1/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Reading 0 ... 2507000  =      0.000 ... 25070.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Reading 0 ... 3260000  =      0.000 ... 32600.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Reading 0 ... 2507000  =      0.000 ... 25070.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Writing /tmp/tmpk2hn_umu/0/0-raw.fif
Closing /tmp/tmpk2hn_umu/0/0-raw.fif
[done]
Reading 0 ... 3260000  =      0.000 ... 32600.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Writing /tmp/tmpk2hn_umu/1/1-raw.fif
Closing /tmp/tmpk2hn_umu/1/1-raw.fif
[done]
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:708: UserWarning: Chosen directory /tmp/tmpk2hn_umu contains other subdirectories or files [&#39;0&#39;].
  warnings.warn(f&#39;Chosen directory {path} contains other &#39;
Opening raw data file /tmp/tmpk2hn_umu/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpk2hn_umu/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Reading 0 ... 2507000  =      0.000 ... 25070.000 secs...
Writing /tmp/tmpk2hn_umu/0/0-raw.fif
Closing /tmp/tmpk2hn_umu/0/0-raw.fif
[done]
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:700: UserWarning: The number of saved datasets (1) does not match the number of existing subdirectories (2). You may now encounter a mix of differently preprocessed datasets!
  warnings.warn(f&quot;The number of saved datasets ({i_ds+1+offset}) &quot;
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:708: UserWarning: Chosen directory /tmp/tmpk2hn_umu contains other subdirectories or files [&#39;1&#39;].
  warnings.warn(f&#39;Chosen directory {path} contains other &#39;
Reading 0 ... 3260000  =      0.000 ... 32600.000 secs...
Writing /tmp/tmpk2hn_umu/1/1-raw.fif
Closing /tmp/tmpk2hn_umu/1/1-raw.fif
[done]
/home/runner/work/braindecode/braindecode/braindecode/datasets/base.py:708: UserWarning: Chosen directory /tmp/tmpk2hn_umu contains other subdirectories or files [&#39;0&#39;].
  warnings.warn(f&#39;Chosen directory {path} contains other &#39;
Opening raw data file /tmp/tmpk2hn_umu/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpk2hn_umu/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Opening raw data file /tmp/tmpxeyrlhdx/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpxeyrlhdx/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Opening raw data file /tmp/tmpxeyrlhdx/0/0-raw.fif...
Isotrak not found
    Range : 2884000 ... 5391000 =  28840.000 ... 53910.000 secs
Ready.
Opening raw data file /tmp/tmpxeyrlhdx/1/1-raw.fif...
Isotrak not found
    Range : 1975000 ... 5235000 =  19750.000 ... 52350.000 secs
Ready.
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Reading 0 ... 2507000  =      0.000 ... 25070.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Reading 0 ... 3260000  =      0.000 ... 32600.000 secs...
Filtering raw data in 1 contiguous segment
Setting up low-pass filter at 30 Hz

FIR filter parameters
---------------------
Designing a one-pass, zero-phase, non-causal lowpass filter:
- Windowed time-domain design (firwin) method
- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation
- Upper passband edge: 30.00 Hz
- Upper transition bandwidth: 7.50 Hz (-6 dB cutoff frequency: 33.75 Hz)
- Filter length: 45 samples (0.450 s)

Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4001E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
Extracting EDF parameters from /home/runner/mne_data/physionet-sleep-data/SC4011E0-PSG.edf...
EDF file detected
Setting channel info structure...
Creating raw.info structure...
</pre></div>
</div>
<p>Finally, we can plot the results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">results</span></a><span class="p">)</span>

<a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="matplotlib.figure.Figure" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a><span class="p">,</span> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="matplotlib.axes.Axes" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ax</span></a> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="matplotlib.pyplot.subplots" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span></a><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">colors</span></a> <span class="o">=</span> <span class="p">{</span><span class="kc">True</span><span class="p">:</span> <span class="s1">&#39;tab:orange&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">}</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">markers</span></a> <span class="o">=</span> <span class="p">{</span><span class="n">n</span><span class="p">:</span> <span class="n">m</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">all_n_jobs</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">])}</span>
<span class="k">for</span> <span class="p">(</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">),</span> <span class="n">sub_df</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;n_jobs&#39;</span><span class="p">]):</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">sub_df</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">sub_df</span><span class="p">[</span><span class="s1">&#39;max_mem&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">colors</span></a><span class="p">[</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="p">],</span>
               <span class="n">marker</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">markers</span></a><span class="p">[</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;save=</span><span class="si">{</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">save</span></a><span class="si">}</span><span class="s1">, n_jobs=</span><span class="si">{</span><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int64" title="numpy.int64" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-attribute"><span class="n">n_jobs</span></a><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.legend.html#matplotlib.axes.Axes.legend" title="matplotlib.axes.Axes.legend" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">legend</span></a><span class="p">()</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="s1">&#39;Execution time (s)&#39;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="s1">&#39;Memory usage (MiB)&#39;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_title.html#matplotlib.axes.Axes.set_title" title="matplotlib.axes.Axes.set_title" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span></a><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Loading and preprocessing </span><span class="si">{</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">all_n_recs</span></a><span class="si">}</span><span class="s1"> recordings from Sleep &#39;</span>
             <span class="s1">&#39;Physionet&#39;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" title="matplotlib.pyplot.show" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">show</span></a><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_benchmark_preprocessing_001.png" srcset="../../_images/sphx_glr_plot_benchmark_preprocessing_001.png" alt="Loading and preprocessing 2 recordings from Sleep Physionet" class = "sphx-glr-single-img"/><p>We see that parallel preprocessing without serialization (blue crosses) is
faster than simple sequential processing (blue circles), however it uses more
memory.</p>
<p>Combining parallel preprocessing and serialization (orange crosses) reduces
memory usage significantly, however it increases run time by a few seconds.
Depending on available resources (e.g. in limited memory settings), it might
therefore be more advantageous to use both parallelization and serialization
together.</p>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (1 minutes 29.220 seconds)</p>
<p><strong>Estimated memory usage:</strong>  367 MB</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-datasets-io-plot-benchmark-preprocessing-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/60d8dafd5347638108915bae984c26bd/plot_benchmark_preprocessing.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_benchmark_preprocessing.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/1c6590d134fa0befda654e89aa55b2ac/plot_benchmark_preprocessing.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_benchmark_preprocessing.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


  
</div>

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="benchmark_lazy_eager_loading.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Benchmarking eager and lazy loading</p>
      </div>
    </a>
    <a class="right-next"
       href="plot_custom_dataset_example.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Custom Dataset Example</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

    <script src="https://braindecode.org/versionwarning.js"></script>
    
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="text-center text-muted small">&copy; Copyright 2018–2023, Braindecode Developers.</p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>